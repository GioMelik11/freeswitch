<include>
  <!-- Essential Variables -->
  <X-PRE-PROCESS cmd="set" data="default_password=1234"/>
  <X-PRE-PROCESS cmd="set" data="disable_system_api_commands=false"/>

  <!-- Domain and IP settings -->
  <X-PRE-PROCESS cmd="set" data="domain=$${local_ip_v4}"/>
  <X-PRE-PROCESS cmd="set" data="domain_name=$${domain}"/>

  <!-- Hold music -->
  <X-PRE-PROCESS cmd="set" data="hold_music=local_stream://moh"/>

  <!-- Codec preferences -->
  <X-PRE-PROCESS cmd="set" data="global_codec_prefs=PCMU,PCMA,G722,OPUS,G729"/>
  <X-PRE-PROCESS cmd="set" data="outbound_codec_prefs=PCMU,PCMA,G722,OPUS,G729"/>

  <!-- RTP Port Range -->
  <X-PRE-PROCESS cmd="set" data="rtp_start_port=10000"/>
  <X-PRE-PROCESS cmd="set" data="rtp_end_port=10005"/>

  <!-- RTP/SIP external IP settings
       IMPORTANT: external_* MUST be a publicly reachable IP (or auto-nat if it resolves correctly).
       If providers can't reach the Contact address, inbound calls will fail with no dialplan logs. -->
  <X-PRE-PROCESS cmd="set" data="external_rtp_ip=109.172.130.157"/>
  <X-PRE-PROCESS cmd="set" data="external_sip_ip=109.172.130.157"/>

  <!-- Force local RTP for internal calls -->
  <X-PRE-PROCESS cmd="set" data="local_rtp_ip=$${local_ip_v4}"/>
  <X-PRE-PROCESS cmd="set" data="local_sip_ip=$${local_ip_v4}"/>

  <!-- Caller ID settings -->
  <X-PRE-PROCESS cmd="set" data="outbound_caller_name=FreeSWITCH"/>
  <X-PRE-PROCESS cmd="set" data="outbound_caller_id=0000000000"/>

  <!-- Debug settings - Disabled for cleaner logs -->
  <X-PRE-PROCESS cmd="set" data="call_debug=false"/>
  <X-PRE-PROCESS cmd="set" data="console_loglevel=info"/>
  <X-PRE-PROCESS cmd="set" data="rtp_debug=false"/>
  <X-PRE-PROCESS cmd="set" data="media_debug=false"/>

  <!-- Ring tones -->
  <X-PRE-PROCESS cmd="set" data="us-ring=%(2000,4000,440,480)"/>

  <!-- SIP Profile settings -->
  <X-PRE-PROCESS cmd="set" data="internal_auth_calls=true"/>
  <X-PRE-PROCESS cmd="set" data="internal_sip_port=5060"/>
  <X-PRE-PROCESS cmd="set" data="internal_tls_port=5061"/>
  <X-PRE-PROCESS cmd="set" data="internal_ssl_enable=false"/>

  <X-PRE-PROCESS cmd="set" data="external_auth_calls=false"/>
  <X-PRE-PROCESS cmd="set" data="external_sip_port=5080"/>
  <X-PRE-PROCESS cmd="set" data="external_tls_port=5081"/>
  <X-PRE-PROCESS cmd="set" data="external_ssl_enable=false"/>

  <!-- Video settings -->
  <X-PRE-PROCESS cmd="set" data="rtp_video_max_bandwidth_in=1mb"/>
  <X-PRE-PROCESS cmd="set" data="rtp_video_max_bandwidth_out=1mb"/>

  <!-- Sound files settings -->
  <X-PRE-PROCESS cmd="set" data="SOUND_RATES=8000,16000,22050,32000,44100,48000"/>
  <X-PRE-PROCESS cmd="set" data="SOUND_TYPES=wav,mp3"/>

  <!--
      Sound path fix (Docker/WSL)
      The container image defaults sound_prefix/sounds_dir to /usr/local/freeswitch/share/freeswitch/sounds,
      but this project bind-mounts sounds to /usr/share/freeswitch/sounds.
      Without these overrides, IVR prompts like "ivr/incoming.wav" won't be found.
  -->
  <X-PRE-PROCESS cmd="set" data="sounds_dir=/usr/share/freeswitch/sounds"/>
  <X-PRE-PROCESS cmd="set" data="sound_prefix=/usr/share/freeswitch/sounds"/>

  <!--
      mod_audio_stream test server base URL.
      Used by freeswitch/dialplan/default/99_adminpanel_audio_stream_test.xml as $${audio_stream_test_url}.

      Docker Desktop (Windows/Mac): host.docker.internal is typically the right target *if* you publish 9096.
      Linux: you may prefer ws://127.0.0.1:9096 (host networking) or ws://<backend-container-ip>:9096.
  -->
  <!-- Default to same "gateway-style" IP used elsewhere in this repo (see dialplan/default/10_adminpanel_extensions.xml). -->
  <X-PRE-PROCESS cmd="set" data="audio_stream_test_url=ws://172.23.0.1:9096"/>

</include>


